@import "tailwindcss";
@import "tw-animate-css";

/* === Design Tokens & Theming (Phase 1) === */
:root {
  /* Base surfaces */
  --c-bg: #f6f8fa;
  --c-bg-soft: #eef2f5;
  --c-surface: #ffffff;
  --c-surface-alt: #f1f5f9;
  --c-surface-inset: #e7edf3;
  --c-border: #d9e0e7;
  --c-border-strong: #b5c0c9;

  /* Text */
  --c-text: #1f2732;
  --c-text-soft: #55606e;
  --c-text-faint: #8a95a3;
  --c-text-invert: #ffffff;

  /* Accent scale (teal -> violet accent blend) */
  --c-accent-50: #f0fdfa;
  --c-accent-100: #ccfbf1;
  --c-accent-200: #99f6e4;
  --c-accent-300: #5eead4;
  --c-accent-400: #2dd4bf;
  --c-accent-500: #14b8a6; /* primary */
  --c-accent-600: #0d9488;
  --c-accent-700: #0f766e;
  --c-accent-800: #115e59;
  --c-accent-900: #134e4a;
  --c-accent: var(--c-accent-600);
  --c-accent-rgb: 13 148 136;
  --c-accent-alt: #7c3aed;
  --c-accent-alt-rgb: 124 58 237;
  --c-accent-soft: #dbf5f2;
  --c-accent-contrast: var(--c-text-invert);
  --c-focus-ring: rgba(var(--c-accent-rgb)/.55);

  --c-danger: #dc2626;
  --c-warn: #d97706;
  --c-success: #059669;
  --c-focus: #2563eb;

  /* Gradients */
  --gradient-strong: linear-gradient(135deg,#7c3aed 0%,#0d9488 100%);
  --gradient-soft: linear-gradient(135deg,#ede9fe 0%,#d1fae5 100%);
  --gradient-accent: linear-gradient(135deg,var(--c-accent-500) 0%,var(--c-accent-alt) 100%);

  --gradient-strong: linear-gradient(135deg,#7c3aed 0%,#0d9488 100%);
  --gradient-soft: linear-gradient(135deg,#ede9fe 0%,#d1fae5 100%);

  --sh-sm: 0 1px 2px rgba(0 0 0 / 0.06);
  --sh-md: 0 4px 12px -2px rgba(0 0 0 / 0.10),0 2px 4px -1px rgba(0 0 0 / 0.06);
  --sh-lg: 0 10px 30px -6px rgba(24 39 75 / 0.18);

  --r-xs: 4px; --r-sm: 6px; --r-md: 10px; --r-lg: 16px; --r-xl: 24px; --r-pill: 999px;

  --fs-xs: clamp(.72rem,.67rem + .25vw,.78rem);
  --fs-sm: clamp(.82rem,.77rem + .25vw,.9rem);
  --fs-base: clamp(.95rem,.9rem + .35vw,1.05rem);
  --fs-lg: clamp(1.05rem,.95rem + .6vw,1.25rem);
  --fs-xl: clamp(1.3rem,1.05rem + 1vw,1.7rem);
  --fs-2xl: clamp(1.6rem,1.2rem + 1.6vw,2.25rem);
  --fs-3xl: clamp(2rem,1.4rem + 2.8vw,3rem);

  --easing: cubic-bezier(.4,0,.2,1);
  --dur-fast: 120ms; --dur-med: 200ms; --dur-slow: 340ms;
  --container-max: 1280px; --content-max: 72ch;
}
.dark {
  --c-bg: #0f1214;
  --c-bg-soft: #141a1f;
  --c-surface: #171d22;
  --c-surface-alt: #1f262c;
  --c-surface-inset: #1b2228;
  --c-border: #2c353e;
  --c-border-strong: #3b4651;
  --c-text: #f3f6f8;
  --c-text-soft: #b2bcc6;
  --c-text-faint: #7f8993;
  --c-text-invert: #0f1214;
  --c-accent: #14b8a6;
  --c-accent-rgb: 20 184 166;
  --c-accent-alt: #8b5cf6;
  --c-accent-alt-rgb: 139 92 246;
  --c-accent-soft: #163c37;
  --c-accent-contrast: #ffffff;
  --c-focus-ring: rgba(var(--c-accent-rgb)/.65);
  --c-danger: #f87171;
  --c-warn: #fbbf24;
  --c-success: #34d399;
  --c-focus: #3b82f6;
  --gradient-strong: linear-gradient(135deg,#8b5cf6 0%,#14b8a6 100%);
  --gradient-soft: linear-gradient(135deg,#2a2240 0%,#13322c 100%);
  --gradient-accent: linear-gradient(135deg,#14b8a6 0%,#8b5cf6 100%);
}
html { -webkit-font-smoothing: antialiased; scroll-behavior:smooth; }
body { background:var(--c-bg); color:var(--c-text); font-size:var(--fs-base); line-height:1.55; }
.h1 { font-size:var(--fs-3xl); font-weight:600; line-height:1.15; letter-spacing:-.02em; }
.h2 { font-size:var(--fs-2xl); font-weight:600; line-height:1.18; }
.h3 { font-size:var(--fs-xl); font-weight:600; line-height:1.2; }
.lead { font-size:var(--fs-lg); color:var(--c-text-soft); line-height:1.45; }
.text-soft { color:var(--c-text-soft); }
.text-faint { color:var(--c-text-faint); }
.layout-container { max-width:var(--container-max); margin-inline:auto; width:100%; padding-inline:clamp(1rem,2vw,2rem); }
.btn { --btn-bg: var(--c-accent); --btn-color:#fff; --btn-ring:0 0 0 2px rgba(var(--c-accent-rgb)/.35); display:inline-flex; align-items:center; justify-content:center; gap:.55ch; font-weight:500; font-size:var(--fs-sm); padding:.65rem 1.05rem; border-radius:var(--r-md); background:var(--btn-bg); color:var(--btn-color); box-shadow:var(--sh-sm); transition:background var(--dur-med) var(--easing), box-shadow var(--dur-fast) var(--easing), transform var(--dur-fast) var(--easing); }
.btn:hover { background:linear-gradient(135deg,var(--c-accent) 0%,var(--c-accent-alt) 100%); }
.btn:active { transform:translateY(1px); }
.btn:focus-visible { outline:none; box-shadow:var(--btn-ring); }
.btn-subtle { --btn-bg:var(--c-surface-alt); --btn-color:var(--c-text); border:1px solid var(--c-border); }
.btn-ghost { --btn-bg:transparent; --btn-color:var(--c-text-soft); border:1px solid transparent; }
.btn-ghost:hover { background:var(--c-surface-alt); color:var(--c-text); }
.btn-danger { --btn-bg:var(--c-danger); }
.btn-pill { border-radius:var(--r-pill); }
.card { background:var(--c-surface); border:1px solid var(--c-border); border-radius:var(--r-lg); padding:1.5rem; box-shadow:var(--sh-sm); position:relative; transition:box-shadow var(--dur-med) var(--easing), border-color var(--dur-med) var(--easing), transform var(--dur-fast); }
.card:hover { box-shadow:var(--sh-md); }
.card-elevated { box-shadow:var(--sh-lg); }
.card-muted { background:var(--c-surface-alt); }
.avatar-ring { background:var(--gradient-strong); padding:2px; border-radius:50%; display:inline-flex; }
.focus-outline:focus-visible { outline:none; box-shadow:0 0 0 2px var(--c-bg),0 0 0 4px var(--c-focus-ring); }
.field-input { width:100%; border:1px solid var(--c-border); background:var(--c-surface); border-radius:var(--r-md); padding:.75rem .9rem; font-size:var(--fs-sm); line-height:1.4; transition:border-color var(--dur-fast) var(--easing), box-shadow var(--dur-fast) var(--easing), background var(--dur-fast) var(--easing); }
.field-input::placeholder { color:var(--c-text-faint); }
.field-input:focus { outline:none; border-color:var(--c-accent); box-shadow:0 0 0 3px rgba(var(--c-accent-rgb)/.35); }
.field-input[disabled] { opacity:.6; cursor:not-allowed; }
.chip { --chip-bg:var(--c-surface-alt); --chip-color:var(--c-text-soft); display:inline-flex; align-items:center; gap:.35ch; padding:.45rem .85rem; font-size:var(--fs-xs); font-weight:500; border:1px solid var(--c-border); background:var(--chip-bg); color:var(--chip-color); border-radius:999px; line-height:1; cursor:pointer; transition:background var(--dur-fast) var(--easing), color var(--dur-fast) var(--easing), border-color var(--dur-fast) var(--easing), box-shadow var(--dur-fast) var(--easing); }
.chip:hover { background:var(--c-surface); color:var(--c-text); }
.chip-active { --chip-bg:var(--c-accent); --chip-color:#fff; border-color:var(--c-accent); box-shadow:0 0 0 1px var(--c-accent),0 2px 6px -2px rgba(var(--c-accent-rgb)/.55); background:linear-gradient(135deg,var(--c-accent) 0%,var(--c-accent-alt) 100%); }
.chip-active:hover { filter:brightness(1.05); }
.body-chip { font-size:var(--fs-xs); justify-content:space-between; min-height:2.25rem; }
.body-chip-active { background:rgba(var(--c-accent-rgb)/.18); border-color:var(--c-accent); color:var(--c-accent); }
.section-gap { display:flex; flex-direction:column; gap:1.35rem; }
.form-gap { display:flex; flex-direction:column; gap:1rem; }
@media (prefers-reduced-motion:reduce){ * { animation:none !important; transition:none !important; } }


@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --color-accentLavender: var(--accentLavender);
  --color-accentTeal: var(--accentTeal);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.129 0.042 264.695);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.129 0.042 264.695);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.129 0.042 264.695);
  --primary: oklch(0.208 0.042 265.755);
  --primary-foreground: oklch(0.984 0.003 247.858);
  --secondary: oklch(0.968 0.007 247.896);
  --secondary-foreground: oklch(0.208 0.042 265.755);
  --muted: oklch(0.968 0.007 247.896);
  --muted-foreground: oklch(0.554 0.046 257.417);
  --accent: oklch(0.968 0.007 247.896);
  --accent-foreground: oklch(0.208 0.042 265.755);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.929 0.013 255.508);
  --input: oklch(0.929 0.013 255.508);
  --ring: oklch(0.704 0.04 256.788);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.984 0.003 247.858);
  --sidebar-foreground: oklch(0.129 0.042 264.695);
  --sidebar-primary: oklch(0.208 0.042 265.755);
  --sidebar-primary-foreground: oklch(0.984 0.003 247.858);
  --sidebar-accent: oklch(0.968 0.007 247.896);
  --sidebar-accent-foreground: oklch(0.208 0.042 265.755);
  --sidebar-border: oklch(0.929 0.013 255.508);
  --sidebar-ring: oklch(0.704 0.04 256.788);
  --accentLavender: #B19CD9;
  --accentTeal: #7FBEAA;
}

.dark {
  --background: oklch(0.129 0.042 264.695);
  --foreground: oklch(0.984 0.003 247.858);
  --card: oklch(0.208 0.042 265.755);
  --card-foreground: oklch(0.984 0.003 247.858);
  --popover: oklch(0.208 0.042 265.755);
  --popover-foreground: oklch(0.984 0.003 247.858);
  --primary: oklch(0.929 0.013 255.508);
  --primary-foreground: oklch(0.208 0.042 265.755);
  --secondary: oklch(0.279 0.041 260.031);
  --secondary-foreground: oklch(0.984 0.003 247.858);
  --muted: oklch(0.279 0.041 260.031);
  --muted-foreground: oklch(0.704 0.04 256.788);
  --accent: oklch(0.279 0.041 260.031);
  --accent-foreground: oklch(0.984 0.003 247.858);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.551 0.027 264.364);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.208 0.042 265.755);
  --sidebar-foreground: oklch(0.984 0.003 247.858);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.984 0.003 247.858);
  --sidebar-accent: oklch(0.279 0.041 260.031);
  --sidebar-accent-foreground: oklch(0.984 0.003 247.858);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.551 0.027 264.364);
  --accentLavender: #B19CD9;
  --accentTeal: #7FBEAA;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Custom slider styles for challenge page */
input[type="range"].slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
}

input[type="range"].slider-thumb::-webkit-slider-track {
  background: #e5e7eb;
  height: 8px;
  border-radius: 4px;
}

input[type="range"].slider-thumb::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  background: #7FBEAA;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.2s ease;
}

input[type="range"].slider-thumb::-webkit-slider-thumb:hover {
  background: #6ba394;
  transform: scale(1.1);
}

input[type="range"].slider-thumb::-moz-range-track {
  background: #e5e7eb;
  height: 8px;
  border-radius: 4px;
  border: none;
}

input[type="range"].slider-thumb::-moz-range-thumb {
  background: #7FBEAA;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  cursor: pointer;
  border: none;
  transition: background 0.2s ease;
}

input[type="range"].slider-thumb::-moz-range-thumb:hover {
  background: #6ba394;
}

/* Breathing circle animation */
@keyframes breathe-in {
  0% { transform: scale(1); }
  100% { transform: scale(1.3); }
}

@keyframes breathe-out {
  0% { transform: scale(1.3); }
  100% { transform: scale(1); }
}

.breathe-in {
  animation: breathe-in ease-in-out;
}

.breathe-out {
  animation: breathe-out ease-in-out;
}
